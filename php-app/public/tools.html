<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ferramentas Ãºteis â€” Livre-se</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body class="page tools-page">
  <header class="topbar">
    <div class="brand">Ferramentas Ãšteis</div>
    <nav><a href="/index.html">InÃ­cio</a> Â· <a href="/services.html">ServiÃ§os</a> Â· <a href="/help.html">Ajuda</a></nav>
  </header>

  <main class="tools">
    <section class="card">
      <h2>Conversores e serviÃ§os externos</h2>
      <div class="list">
        <a href="https://www.ilovepdf.com/pt" target="_blank" rel="noopener" data-tool="ilovepdf">iLovePDF â€” Conversor / compressÃ£o / PDF</a>
        <a href="https://www.pdf24.org/" target="_blank" rel="noopener" data-tool="pdf24">PDF24 â€” Conversor e voz->texto PDF</a>
        <a href="https://max.ai/" target="_blank" rel="noopener" data-tool="maxai">MaxAI â€” OCR / reconhecimento de texto</a>
      </div>
      <p class="muted">Ao abrir uma destas pÃ¡ginas iremos registar a utilizaÃ§Ã£o para mÃ©tricas internas (anonimamente se nÃ£o estiveres logado).</p>
    </section>

    <section class="card">
      <h2>Ferramentas internas</h2>
      <div class="internal">
        <a href="/tools/notes.html" class="btn" data-tool="minhas_notes">ğŸ“’ As Minhas Notas</a>
        <a href="/tools/apa.html" class="btn" data-tool="formatacao_apa">ğŸ“š FormataÃ§Ã£o APA (6/7)</a>
        <a href="/tools/converter-voz.html" class="btn" data-tool="voz_para_texto">ğŸ¤ Conversor Vozâ†’Texto (externo integrado)</a>
      </div>
      <p class="muted">As ferramentas internas abaixo jÃ¡ estÃ£o disponÃ­veis dentro da plataforma para uso imediato.</p>
    </section>

    <section class="card">
      <h2>Privacidade & tracking</h2>
      <p class="muted">Apenas registamos que uma ferramenta foi usada (tool id). NÃ£o guardamos conteÃºdos de ficheiros. Para utilizadores autenticados o evento ficarÃ¡ associado Ã  conta.</p>
    </section>
  </main>

  <footer class="footer"><p class="muted">Â© Livre-se das Tarefas</p></footer>

  <script>
    const token = localStorage.getItem('token') || '';
    async function track(tool) {
      try {
        await fetch('/api/tools/track', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            ...(token ? { Authorization: 'Bearer ' + token } : {})
          },
          body: JSON.stringify({ tool })
        });
      } catch (e) { /* tracking Ã© nÃ£o intrusivo â€” falhas sÃ£o silenciosas */ }
    }

    document.querySelectorAll('[data-tool]').forEach(el => {
      el.addEventListener('click', (ev) => {
        const tool = el.getAttribute('data-tool') || 'unknown';
        // para links externos queremos registar antes de sair; usamos navigator.sendBeacon quando possÃ­vel
        if (navigator.sendBeacon && el.tagName.toLowerCase() === 'a') {
          try {
            const payload = JSON.stringify({ tool });
            navigator.sendBeacon('/api/tools/track', new Blob([payload], { type: 'application/json' }));
          } catch (e) {
            track(tool);
          }
        } else {
          // chamada assÃ­ncrona normal
          track(tool);
        }
      });
    });
  </script>
  <script src="/nav-mobile.js"></script>
</body>
</html>